# 核心功能

<cite>
**本文档中引用的文件**   
- [example.py](file://example.py)
- [cosyvoice.py](file://cosyvoice/cli/cosyvoice.py)
- [model.py](file://cosyvoice/cli/model.py)
- [frontend.py](file://cosyvoice/cli/frontend.py)
- [tokenizer.py](file://cosyvoice/tokenizer/tokenizer.py)
- [common.py](file://cosyvoice/utils/common.py)
- [llm.py](file://cosyvoice/llm/llm.py)
- [flow.py](file://cosyvoice/flow/flow.py)
- [hifigan.py](file://cosyvoice/hifigan/hifigan.py)
</cite>

## 目录
1. [零样本语音合成](#零样本语音合成)
2. [跨语言语音合成](#跨语言语音合成)
3. [语音克隆](#语音克隆)
4. [发音修补](#发音修补)
5. [流式处理](#流式处理)

## 零样本语音合成

CosyVoice 的零样本语音合成（Zero-Shot TTS）功能允许用户通过提供提示音频和文本，克隆新说话人的声音。该功能通过 `inference_zero_shot` 方法实现，该方法接受目标文本、提示文本和提示音频文件路径作为输入参数。系统首先从提示音频中提取语音标记和说话人嵌入，然后结合提示文本和目标文本，生成与提示音频中说话人声音特征相匹配的语音输出。这种方法无需预先训练或微调模型，即可实现高质量的语音克隆。

**Section sources**
- [example.py](file://example.py#L18-L20)
- [cosyvoice.py](file://cosyvoice/cli/cosyvoice.py#L91-L104)
- [frontend.py](file://cosyvoice/cli/frontend.py#L168-L189)

## 跨语言语音合成

跨语言语音合成功能支持在不同语言间进行语音克隆。用户可以通过 `inference_cross_lingual` 方法，使用一种语言的提示音频来合成另一种语言的语音。该功能通过将提示音频的语音特征与目标语言的文本相结合，实现跨语言的声音转换。例如，可以使用中文的提示音频来生成英文的语音输出，或使用英文的提示音频来生成中文的语音输出。这种能力极大地扩展了语音合成的应用场景，使得多语言语音服务成为可能。

**Section sources**
- [example.py](file://example.py#L21-L24)
- [cosyvoice.py](file://cosyvoice/cli/cosyvoice.py#L105-L115)
- [frontend.py](file://cosyvoice/cli/frontend.py#L191-L198)

## 语音克隆

语音克隆（Voice Conversion）功能允许将一种声音转换为另一种声音。通过 `inference_vc` 方法，用户可以提供源音频和目标提示音频，系统将源音频的声音特征转换为目标提示音频的声音特征。该功能在语音转换、语音修复和个性化语音服务等领域具有重要应用价值。实现原理是提取源音频的语音标记，并结合目标提示音频的说话人嵌入和语音特征，生成具有目标声音特征的语音输出。

**Section sources**
- [example.py](file://example.py#L25-L27)
- [cosyvoice.py](file://cosyvoice/cli/cosyvoice.py#L129-L136)
- [frontend.py](file://cosyvoice/cli/frontend.py#L215-L224)

## 发音修补

发音修补（Pronunciation Inpainting）功能支持对中文拼音和英文音素进行精细控制。通过在文本中插入特定的音素标记，用户可以精确控制语音的发音方式。例如，可以使用 `[laughter]` 标记来添加笑声，使用 `<strong>` 标记来强调某些词语。该功能通过在 `tokenizer.py` 中定义的特殊标记实现，支持多种发音控制标记，包括笑声、咳嗽、吸气等。这使得生成的语音更加自然和富有表现力。

**Section sources**
- [example.py](file://example.py#L52-L54)
- [tokenizer.py](file://cosyvoice/tokenizer/tokenizer.py#L248-L308)
- [common.py](file://cosyvoice/utils/common.py#L28-L53)

## 流式处理

流式处理（Streaming）能力包括文本输入流和音频输出流，能够实现低至150ms的延迟。通过设置 `stream=True` 参数，系统可以实时处理文本输入并生成音频输出，适用于实时语音合成和交互式语音应用。流式处理通过分块处理和缓存机制实现，确保在保持低延迟的同时，生成高质量的语音输出。该功能在实时对话系统、语音助手和在线教育等场景中具有重要应用价值。

**Section sources**
- [example.py](file://example.py#L60-L68)
- [model.py](file://cosyvoice/cli/model.py#L184-L214)
- [flow.py](file://cosyvoice/flow/flow.py#L230-L277)